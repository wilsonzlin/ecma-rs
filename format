#!/usr/bin/env bash

set -Eeuxo pipefail

pushd "$(dirname "$0")" >/dev/null

cargo fmt --all

if command -v npx >/dev/null 2>&1; then
  npx --yes prettier@3.4.2 --write \
    'version' \
    '.github/workflows/*.yaml' \
    'minify-js-nodejs/**/*.{js,json,ts,d.ts}' \
    'optimize-js-debugger/src/**/*.{ts,tsx,css,html}' \
    'optimize-js-debugger/*.ts' \
    'typecheck-ts-harness/scripts/*.js'
else
  echo "warning: npx not found; skipping prettier formatting" >&2
fi

popd >/dev/null
